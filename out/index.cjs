"use strict";var S=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var q=Object.prototype.hasOwnProperty;var W=(t,e)=>{for(var r in e)S(t,r,{get:e[r],enumerable:!0})},B=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of V(e))!q.call(t,o)&&o!==r&&S(t,o,{get:()=>e[o],enumerable:!(s=F(e,o))||s.enumerable});return t};var K=t=>B(S({},"__esModule",{value:!0}),t);var te={};W(te,{app:()=>L,component:()=>Q,computed:()=>J,hasWindow:()=>R,mapper:()=>P,ref:()=>X,render:()=>Z,state:()=>G,store:()=>Y,styler:()=>N,valueOf:()=>ee});module.exports=K(te);var g=()=>{let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",r=t.length;for(let s=0;s<10;s++)e+=t.charAt(Math.floor(Math.random()*r));return e},_=g(),I=t=>{_=t};var M=t=>t.map(e=>JSON.stringify(Object.hasOwn(e,"get")&&e.get())).join(""),j=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();var b=t=>{let e="",r=!1,s={},o=a=>{},m=()=>{let a=document.querySelector(`[data-nice-id="${e}"]`);!a||r||(r=!0,setTimeout(()=>{let n=o(e);n&&a.replaceWith(n.children[0]),r=!1},0))};return(a,n)=>(e=g(),I(e),s=a??{},o=t(s,n),{id:e,type:"component",properties:a,render:o,markDirty:m,key:n??e})};var L=(t,e)=>{let r=b(t)();if(e&&typeof window<"u"){let s=e?document.querySelector(e):void 0;if(!s)throw new Error(`Failed to attach - Element "${e}" not found in the DOM.`);r.markDirty=()=>{let o=r.render(g());if(o){for(;s.firstChild;)s.removeChild(s.firstChild);window?Array.from(o.hydrate().children).forEach(m=>{s.appendChild(m)}):s.innerHTML=o.html}},r.markDirty()}else return{html:r.render("nice-app-root").html,id:"nice-app-root",hydrate:s=>{let o=document.querySelector(`#${s}`);if(!o)throw new Error(`Failed to attach - Element "${e}" not found in the DOM.`);r.markDirty=()=>{let m=r.render(g());if(m){for(;o.firstChild;)o.removeChild(o.firstChild);window?Array.from(m.hydrate().children).forEach(d=>{o.appendChild(d)}):o.innerHTML=m.html}},r.markDirty()}}};var D=(t,...e)=>o=>{let m=`<!-- ${o} BEGIN -->`,d=`<!-- ${o} END -->`,a="",n={},i={};t.forEach((f,l)=>{let p=e[l];if(a+=f,p===void 0)return;let u=$(f),c=Math.random().toString(36).substring(7);if(typeof p!="object"){u&&!f.endsWith('"')?a+=`"${p}"`:a+=p;return}switch(p.type){case"component":a+=c,n[c]=p.render(p.id);break;case"state":a+=c,i[c]=p;break}}),Object.keys(n).forEach(f=>{a=a.replace(f,n[f].html.replace(/(<.+)( )/,`$1 data-reattach-child="${f}" `))}),Object.keys(i).forEach(f=>{let l=a.split(f)[0],p=$(l),u=i[f].get(),c=u,x=1;if(u)if(typeof u=="object"&&u.type==="component"){let T=u;c=T.render(T.id).html}else Array.isArray(u)&&(x=u.length,c=u.map(T=>{if(typeof T=="object"&&T.type==="component"){let E=T;return E.render(E.id).html}else return T}).join(""));let k=p?`"${c||""}" data-bind-${p}="${f}"`:`<!-- @ -->${c}<span style="display: none;" data-reattach-state="${f}" data-reattach-extras="${!!c&&x}"></span><!-- # -->`;a=a.replace(f,k)});let y=()=>{let f=z(a);return f.children[0].setAttribute("data-nice-id",o),Object.keys(i).forEach(l=>{f.querySelectorAll(`[data-reattach-state="${l}"]`).forEach(p=>{let u=p.getAttribute("data-reattach-extras");if(u&&u!=="false")for(let x=0;x<parseInt(u);x++)p.previousSibling?.remove();let c=i[l].get();i[l].markers.push([p.previousSibling,p.nextSibling]),A(c,p.previousSibling,p.nextSibling)})}),Object.keys(n).forEach(l=>{f.querySelectorAll(`[data-reattach-child="${l}"]`).forEach(p=>{p.replaceWith(n[l].hydrate().children[0])})}),f.querySelectorAll("*").forEach(l=>{Array.from(l.attributes).forEach(p=>{let u=p.name.match(/data-bind-(.+)$/);if(u){let c=u[1].trim(),x=p.value,k=c.startsWith("on-"),T=c.startsWith("set-"),E=c==="ref",h=i[x];if(!h)return;h.attributes[c]||(h.attributes[c]=[]),k?(l.removeAttribute(c),l.addEventListener(c.slice(3),w=>h.set(w))):T?(l.removeAttribute(c),h.listen(w=>{l[c.slice(4)]=w}),l[c.slice(4)]=h.get()):E?(l.removeAttribute(c),h.set(l)):(h.attributes[c].push(l),l.setAttribute(c,h.get()??"")),l.removeAttribute(p.name)}})}),f};return{html:a.trim(),hydrate:y}},A=(t,e,r)=>{let s=[],o=e.nextSibling;for(;o!==r;)s.push(o),o=o?.nextSibling;if(t&&typeof t=="object"&&t.type==="component"){let m=t,d=m.render(m.id);s.forEach(a=>a.remove()),d&&Array.from(d.hydrate().children).reverse().forEach(a=>e.after(a))}else{let m=Array.isArray(t)?t:[t],d=m.map(n=>{if(typeof n=="object"&&n.type==="component"){let i=n;return i.key??i.id}else return}).filter(n=>n!==void 0),a=m.map(n=>{if(typeof n=="object"&&n.type==="component"){let i=n,y=i.render(i.id).hydrate();return y.children[0]&&n.key&&y.children[0].setAttribute("data-nice-key",n.key),y}else return n});d.length?(s.forEach(n=>{d.includes(n.getAttribute("data-nice-key"))||n.remove()}),a.reverse().forEach(n=>{if(n instanceof HTMLElement){let i=null;Array.from(n.children).reverse().forEach(y=>{e.parentElement?.querySelector(`[data-nice-key="${y.getAttribute("data-nice-key")}"]`)||(i??r).before(y),i=y})}else{let i=document.createTextNode(n);e.after(i)}})):(s.forEach(n=>n.remove()),a.reverse().forEach(n=>{if(n instanceof HTMLElement)Array.from(n.children).reverse().forEach(i=>e.after(i));else{let i=document.createTextNode(n);e.after(i)}}))}},z=t=>{let e=document.createElement("div");return e.innerHTML=t,e},$=t=>{let e=/.+ (.+)="?$/gm,r,s=[];for(;(r=e.exec(t))!==null;)r.index===e.lastIndex&&e.lastIndex++,r.forEach(o=>{s.push(o)});if(s.length===2)return s[1]};var C=t=>{let e=t,r=g(),s=[],o=[],m=[],d={};return{id:r,type:"state",get:()=>e,set:a=>{let n=e;typeof t=="function"?n=a(e):n=a,n!==e&&(e=n,s.forEach(i=>i(n)),Object.entries(d).forEach(([i,y])=>{y.forEach(f=>{f.setAttribute(i,n??"")})}),m.forEach(([i,y])=>{A(e,i,y)}))},listen:a=>s.push(a),textNodes:o,markers:m,attributes:d}},v=(t,e)=>{let r=C(void 0),s=void 0,o=(e??[]).map(d=>d&&typeof d=="object"&&Object.hasOwn(d,"listen")?d:!1).filter(Boolean),m=d=>{let a=!!d&&!e,n=t(d),i=M(o);n!==r.get()&&i!==s&&!a&&r.set(n)};return e?(o.forEach(d=>d.listen(m)),m()):r.listen(m),r},O=t=>v(t||(()=>{}));var H=t=>{let e=Object.entries(t).reduce((r,[s,o])=>(r[s]=C(o),r),{});return r=>e[r]};var P=(t,e)=>{let r=[];typeof t=="number"?r=Array.from({length:t},(m,d)=>d+1):Array.isArray(t)?r=[...t]:typeof t=="object"&&(r=Array.from(Object.entries(t)));let s=!1,o=r.map((m,d)=>{let a=e(m,d);return typeof a=="function"?(s=R,b(()=>a)()):a});return s?o.reverse():o},U=t=>typeof t=="object"&&Object.hasOwn(t,"get")?t.get():t,N=t=>Object.entries(t).reduce((e,[r,s])=>`${e}${j(r)}: ${s};`,"");var G=C,J=v,Z=D,Q=b,X=O,Y=H,ee=U,R=typeof window<"u";
